!function(n,r){"use strict";var t={};n.PubSub=t;var e=n.define;!function(f){var c={},e=-1;function a(n){var r;for(r in n)if(n.hasOwnProperty(r))return!0;return!1}function s(n,r,t){try{n(r,t)}catch(n){setTimeout((e=n,function(){throw e}),0)}var e}function p(n,r,t){n(r,t)}function b(n,r,t,e){var o,i=c[r],u=e?p:s;if(c.hasOwnProperty(r))for(o in i)i.hasOwnProperty(o)&&u(i[o],n,t)}function t(n,r,t,e){n="symbol"==typeof n?n.toString():n;var o,i,u,s=(o=n,i=r,u=e,function(){var n=String(o),r=n.lastIndexOf(".");for(b(o,o,i,u);-1!==r;)n=n.substr(0,r),r=n.lastIndexOf("."),b(o,n,i,u)}),f=function(n){var r=String(n),t=Boolean(c.hasOwnProperty(r)&&a(c[r])),e=r.lastIndexOf(".");for(;!t&&-1!==e;)r=r.substr(0,e),e=r.lastIndexOf("."),t=Boolean(c.hasOwnProperty(r)&&a(c[r]));return t}(n);return!!f&&(!0===t?s():setTimeout(s,0),!0)}f.publish=function(n,r){return t(n,r,!1,f.immediateExceptions)},f.publishSync=function(n,r){return t(n,r,!0,f.immediateExceptions)},f.subscribe=function(n,r){if("function"!=typeof r)return!1;n="symbol"==typeof n?n.toString():n,c.hasOwnProperty(n)||(c[n]={});var t="uid_"+String(++e);return c[n][t]=r,t},f.subscribeOnce=function(n,r){var t=f.subscribe(n,function(){f.unsubscribe(t),r.apply(this,arguments)});return f},f.clearAllSubscriptions=function(){c={}},f.clearSubscriptions=function(n){var r;for(r in c)c.hasOwnProperty(r)&&0===r.indexOf(n)&&delete c[r]},f.unsubscribe=function(n){var r,t,e,o="string"==typeof n&&(c.hasOwnProperty(n)||function(n){var r;for(r in c)if(c.hasOwnProperty(r)&&0===r.indexOf(n))return!0;return!1}(n)),i=!o&&"string"==typeof n,u="function"==typeof n,s=!1;if(!o){for(r in c)if(c.hasOwnProperty(r)){if(t=c[r],i&&t[n]){delete t[n],s=n;break}if(u)for(e in t)t.hasOwnProperty(e)&&t[e]===n&&(delete t[e],s=!0)}return s}f.clearSubscriptions(n)}}(t),"function"==typeof e&&e.amd?e(function(){return t}):"object"==typeof exports&&(void 0!==module&&module.exports&&(exports=module.exports=t),exports.PubSub=t,module.exports=exports=t)}("object"==typeof window&&window||this);